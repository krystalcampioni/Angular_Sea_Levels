angular.module("weatherApp",["ngRoute","weatherApp.filters","weatherApp.services","weatherApp.directives","weatherApp.controllers","iso-3166-country-codes"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/forecast",{templateUrl:"forecast.html",controller:"OpenWeatherCtrl"}),$routeProvider.otherwise({redirectTo:"/forecast"})}]);
angular.module("weatherApp.services",["ngResource"]).value("cities",["Amsterdam","London","Berlin","Paris","Madrid"]).factory("openWeatherMap",function($resource){var apiKey="0ecce192500d1a71eb05d1ef815147cc",apiBaseUrl="http://api.openweathermap.org/data/2.5/";return $resource(apiBaseUrl+":path/:subPath?q=:location",{APPID:apiKey,mode:"json",callback:"JSON_CALLBACK",units:"metric",lang:"en"},{queryWeather:{method:"JSONP",params:{path:"weather"},isArray:!1,headers:{"x-api-key":apiKey}},queryForecast:{method:"JSONP",params:{path:"forecast",cnt:5},isArray:!1,headers:{"x-api-key":apiKey}},queryForecastDaily:{method:"JSONP",params:{path:"forecast",subPath:"daily",cnt:7},isArray:!1,headers:{"x-api-key":apiKey}}})});
angular.module("weatherApp.controllers",[]).controller("OpenWeatherCtrl",["$scope","openWeatherMap","cities","ISO3166",function($scope,openWeatherMap,cities,ISO3166){$scope.message="",$scope.hasState="",$scope.cities=cities,$scope.iconBaseUrl="http://openweathermap.org/img/w/",$scope.forecast=openWeatherMap.queryForecastDaily({location:cities[0]}),$scope.fullForecast=openWeatherMap.queryForecastDaily({location:cities[0]}),$scope.getForecastByLocation=function(){$scope.forecast=openWeatherMap.queryForecastDaily({location:$scope.location}),$scope.fullForecast=openWeatherMap.queryForecastDaily({location:$scope.location})},$scope.setLocation=function(loc){$scope.location=loc,$scope.getForecastByLocation()},$scope.getIconImageUrl=function(iconName){return iconName?$scope.iconBaseUrl+iconName+".png":""}}]);
angular.module("weatherApp.filters",[]).filter("interpolate",["version",function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}}]).filter("placeholder",[function(){return function(input,phvalue){return angular.isUndefined(input)||""==input?phvalue:input}}]);
angular.module("weatherApp.directives",[]).directive("forecastItem",[function(){return{scope:{useDayForecast:"=showEntry",forecast:"=forecastItem"},templateUrl:"_forecast-item.html",link:function(scope,element,attrs){scope.getIconImageUrl=function(iconName){return iconName?"http://openweathermap.org/img/w/"+iconName+".png":""},scope.parseDate=function(time){return new Date(1e3*time)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNlcnZpY2VzLmpzIiwiY29udHJvbGxlcnMuanMiLCJmaWx0ZXJzLmpzIiwiZGlyZWN0aXZlcy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsInZhbHVlIiwiZmFjdG9yeSIsIiRyZXNvdXJjZSIsImFwaUtleSIsImFwaUJhc2VVcmwiLCJBUFBJRCIsIm1vZGUiLCJjYWxsYmFjayIsInVuaXRzIiwibGFuZyIsInF1ZXJ5V2VhdGhlciIsIm1ldGhvZCIsInBhcmFtcyIsInBhdGgiLCJpc0FycmF5IiwiaGVhZGVycyIsIngtYXBpLWtleSIsInF1ZXJ5Rm9yZWNhc3QiLCJjbnQiLCJxdWVyeUZvcmVjYXN0RGFpbHkiLCJzdWJQYXRoIiwiJHNjb3BlIiwib3BlbldlYXRoZXJNYXAiLCJjaXRpZXMiLCJJU08zMTY2IiwibWVzc2FnZSIsImhhc1N0YXRlIiwiaWNvbkJhc2VVcmwiLCJmb3JlY2FzdCIsImxvY2F0aW9uIiwiZnVsbEZvcmVjYXN0IiwiZ2V0Rm9yZWNhc3RCeUxvY2F0aW9uIiwic2V0TG9jYXRpb24iLCJsb2MiLCJnZXRJY29uSW1hZ2VVcmwiLCJpY29uTmFtZSIsImZpbHRlciIsInZlcnNpb24iLCJ0ZXh0IiwiU3RyaW5nIiwicmVwbGFjZSIsImlucHV0IiwicGh2YWx1ZSIsImlzVW5kZWZpbmVkIiwiZGlyZWN0aXZlIiwic2NvcGUiLCJ1c2VEYXlGb3JlY2FzdCIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCJwYXJzZURhdGUiLCJ0aW1lIiwiRGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLE9BQU8sY0FDYixVQUNBLHFCQUNBLHNCQUNBLHdCQUNBLHlCQUNBLDJCQUVGQyxRQUFRLGlCQUFrQixTQUFTQyxnQkFDakNBLGVBQWVDLEtBQUssYUFBY0MsWUFBYSxnQkFBaUJDLFdBQVksb0JBQzVFSCxlQUFlSSxXQUFXQyxXQUFZO0FDVnhDUixRQUFRQyxPQUFPLHVCQUF3QixlQUNwQ1EsTUFBTSxVQUFVLFlBQVksU0FBUyxTQUFTLFFBQVEsV0FFdERDLFFBQVEsaUJBQWtCLFNBQVNDLFdBRWxDLEdBQUlDLFFBQVMsbUNBQ1RDLFdBQWEseUNBRWpCLE9BQU9GLFdBQVVFLFdBQWEsOEJBRTFCQyxNQUFPRixPQUNQRyxLQUFNLE9BQ05DLFNBQVUsZ0JBQ1ZDLE1BQU8sU0FDUEMsS0FBTSxPQUdOQyxjQUNFQyxPQUFRLFFBQ1JDLFFBQ0VDLEtBQU0sV0FFUkMsU0FBUyxFQUNUQyxTQUNFQyxZQUFhYixTQUdqQmMsZUFDRU4sT0FBUSxRQUNSQyxRQUNFQyxLQUFNLFdBQ05LLElBQUssR0FFUEosU0FBUyxFQUNUQyxTQUNFQyxZQUFhYixTQUdqQmdCLG9CQUNFUixPQUFRLFFBQ1JDLFFBQ0VDLEtBQU0sV0FDTk8sUUFBUyxRQUNURixJQUFLLEdBRVBKLFNBQVMsRUFDVEMsU0FDRUMsWUFBYWI7QUMvQ3pCWixRQUFRQyxPQUFPLDZCQUNaSyxXQUFXLG1CQUNULFNBQVMsaUJBQWlCLFNBQVMsVUFDbEMsU0FBU3dCLE9BQU9DLGVBQWVDLE9BQU9DLFNBRXhDSCxPQUFPSSxRQUFVLEdBQ2pCSixPQUFPSyxTQUFXLEdBRWxCTCxPQUFPRSxPQUFTQSxPQUNoQkYsT0FBT00sWUFBYyxtQ0FHckJOLE9BQU9PLFNBQVdOLGVBQWVILG9CQUMvQlUsU0FBVU4sT0FBUSxLQUVwQkYsT0FBT1MsYUFBZVIsZUFBZUgsb0JBQ25DVSxTQUFVTixPQUFRLEtBSXBCRixPQUFPVSxzQkFBd0IsV0FDN0JWLE9BQU9PLFNBQVdOLGVBQWVILG9CQUMvQlUsU0FBVVIsT0FBT1EsV0FFbkJSLE9BQU9TLGFBQWVSLGVBQWVILG9CQUNuQ1UsU0FBVVIsT0FBT1EsWUFNckJSLE9BQU9XLFlBQWMsU0FBU0MsS0FDNUJaLE9BQU9RLFNBQVdJLElBQ2xCWixPQUFPVSx5QkFHVFYsT0FBT2EsZ0JBQWtCLFNBQVNDLFVBQ2hDLE1BQVFBLFVBQVdkLE9BQU9NLFlBQWNRLFNBQVcsT0FBUztBQ3JDbEU1QyxRQUFRQyxPQUFPLHlCQUVaNEMsT0FBTyxlQUFnQixVQUFXLFNBQVNDLFNBQzFDLE1BQU8sVUFBU0MsTUFDZCxNQUFPQyxRQUFPRCxNQUFNRSxRQUFRLGdCQUFpQkgsYUFJaERELE9BQU8sZUFBZ0IsV0FDdEIsTUFBTyxVQUFVSyxNQUFNQyxTQUNyQixNQUFRbkQsU0FBUW9ELFlBQVlGLFFBQW1CLElBQVRBLE1BQWVDLFFBQVVEO0FDVnJFbEQsUUFBUUMsT0FBTyw0QkFDWm9ELFVBQVUsZ0JBQWdCLFdBQ3pCLE9BQ0VDLE9BQ0VDLGVBQWdCLGFBQ2hCbEIsU0FBVSxpQkFHWmhDLFlBQWEsc0JBRWJtRCxLQUFNLFNBQVNGLE1BQU9HLFFBQVNDLE9BRTdCSixNQUFNWCxnQkFBa0IsU0FBU0MsVUFDL0IsTUFBUUEsVUFBVyxtQ0FBcUNBLFNBQVcsT0FBUyxJQUc5RVUsTUFBTUssVUFBWSxTQUFVQyxNQUMxQixNQUFPLElBQUlDLE1BQVksSUFBUEQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCd3ZWF0aGVyQXBwJywgW1xuICAnbmdSb3V0ZScsXG4gICd3ZWF0aGVyQXBwLmZpbHRlcnMnLFxuICAnd2VhdGhlckFwcC5zZXJ2aWNlcycsXG4gICd3ZWF0aGVyQXBwLmRpcmVjdGl2ZXMnLFxuICAnd2VhdGhlckFwcC5jb250cm9sbGVycycsXG4gIFwiaXNvLTMxNjYtY291bnRyeS1jb2Rlc1wiXG5dKS5cbmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcbiAgJHJvdXRlUHJvdmlkZXIud2hlbignL2ZvcmVjYXN0Jywge3RlbXBsYXRlVXJsOiAnZm9yZWNhc3QuaHRtbCcsIGNvbnRyb2xsZXI6ICdPcGVuV2VhdGhlckN0cmwnfSk7XG4gICRyb3V0ZVByb3ZpZGVyLm90aGVyd2lzZSh7cmVkaXJlY3RUbzogJy9mb3JlY2FzdCd9KTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWF0aGVyQXBwLnNlcnZpY2VzJywgWyduZ1Jlc291cmNlJ10pXG4gIC52YWx1ZSgnY2l0aWVzJyxbJ0Ftc3RlcmRhbScsJ0xvbmRvbicsJ0JlcmxpbicsJ1BhcmlzJywnTWFkcmlkJ10pXG5cbiAgLmZhY3RvcnkoJ29wZW5XZWF0aGVyTWFwJywgZnVuY3Rpb24oJHJlc291cmNlKSB7XG5cbiAgICB2YXIgYXBpS2V5ID0gJzBlY2NlMTkyNTAwZDFhNzFlYjA1ZDFlZjgxNTE0N2NjJztcbiAgICB2YXIgYXBpQmFzZVVybCA9ICdodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS8nO1xuXG4gICAgcmV0dXJuICRyZXNvdXJjZShhcGlCYXNlVXJsICsgJzpwYXRoLzpzdWJQYXRoP3E9OmxvY2F0aW9uJyxcbiAgICAgIHtcbiAgICAgICAgQVBQSUQ6IGFwaUtleSxcbiAgICAgICAgbW9kZTogJ2pzb24nLFxuICAgICAgICBjYWxsYmFjazogJ0pTT05fQ0FMTEJBQ0snLFxuICAgICAgICB1bml0czogJ21ldHJpYycsXG4gICAgICAgIGxhbmc6ICdlbidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHF1ZXJ5V2VhdGhlcjoge1xuICAgICAgICAgIG1ldGhvZDogJ0pTT05QJyxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHBhdGg6ICd3ZWF0aGVyJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaXNBcnJheTogZmFsc2UsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ3gtYXBpLWtleSc6IGFwaUtleVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcXVlcnlGb3JlY2FzdDoge1xuICAgICAgICAgIG1ldGhvZDogJ0pTT05QJyxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHBhdGg6ICdmb3JlY2FzdCcsXG4gICAgICAgICAgICBjbnQ6IDVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICd4LWFwaS1rZXknOiBhcGlLZXlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJ5Rm9yZWNhc3REYWlseToge1xuICAgICAgICAgIG1ldGhvZDogJ0pTT05QJyxcbiAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHBhdGg6ICdmb3JlY2FzdCcsXG4gICAgICAgICAgICBzdWJQYXRoOiAnZGFpbHknLFxuICAgICAgICAgICAgY250OiA3XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpc0FycmF5OiBmYWxzZSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAneC1hcGkta2V5JzogYXBpS2V5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWF0aGVyQXBwLmNvbnRyb2xsZXJzJywgW10pXG4gIC5jb250cm9sbGVyKCdPcGVuV2VhdGhlckN0cmwnLFxuICAgIFsnJHNjb3BlJywnb3BlbldlYXRoZXJNYXAnLCdjaXRpZXMnLCdJU08zMTY2JyxcbiAgICAgIGZ1bmN0aW9uKCRzY29wZSxvcGVuV2VhdGhlck1hcCxjaXRpZXMsSVNPMzE2Nikge1xuXG4gICAgJHNjb3BlLm1lc3NhZ2UgPSAnJztcbiAgICAkc2NvcGUuaGFzU3RhdGUgPSAnJztcblxuICAgICRzY29wZS5jaXRpZXMgPSBjaXRpZXM7XG4gICAgJHNjb3BlLmljb25CYXNlVXJsID0gJ2h0dHA6Ly9vcGVud2VhdGhlcm1hcC5vcmcvaW1nL3cvJztcblxuICAgIC8vIEdldCBkYWlseSBmb3JlY2FzdCBmb3IgaW5pdGlhbCBwYWdlXG4gICAgJHNjb3BlLmZvcmVjYXN0ID0gb3BlbldlYXRoZXJNYXAucXVlcnlGb3JlY2FzdERhaWx5KHtcbiAgICAgIGxvY2F0aW9uOiBjaXRpZXNbIDAgXVxuICAgIH0pO1xuICAgICRzY29wZS5mdWxsRm9yZWNhc3QgPSBvcGVuV2VhdGhlck1hcC5xdWVyeUZvcmVjYXN0RGFpbHkoe1xuICAgICAgbG9jYXRpb246IGNpdGllc1sgMCBdXG4gICAgfSk7XG5cblxuICAgICRzY29wZS5nZXRGb3JlY2FzdEJ5TG9jYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICRzY29wZS5mb3JlY2FzdCA9IG9wZW5XZWF0aGVyTWFwLnF1ZXJ5Rm9yZWNhc3REYWlseSh7XG4gICAgICAgIGxvY2F0aW9uOiAkc2NvcGUubG9jYXRpb25cbiAgICAgIH0pO1xuICAgICAgJHNjb3BlLmZ1bGxGb3JlY2FzdCA9IG9wZW5XZWF0aGVyTWFwLnF1ZXJ5Rm9yZWNhc3REYWlseSh7XG4gICAgICAgIGxvY2F0aW9uOiAkc2NvcGUubG9jYXRpb25cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBDaGFuZ2UgY3VycmVudCBsb2NhdGlvbiBvbiBidXR0b25zIGNsaWNrc1xuXG4gICAgJHNjb3BlLnNldExvY2F0aW9uID0gZnVuY3Rpb24obG9jKSB7XG4gICAgICAkc2NvcGUubG9jYXRpb24gPSBsb2M7XG4gICAgICAkc2NvcGUuZ2V0Rm9yZWNhc3RCeUxvY2F0aW9uKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5nZXRJY29uSW1hZ2VVcmwgPSBmdW5jdGlvbihpY29uTmFtZSkge1xuICAgICAgcmV0dXJuIChpY29uTmFtZSA/ICRzY29wZS5pY29uQmFzZVVybCArIGljb25OYW1lICsgJy5wbmcnIDogJycpO1xuICAgIH07XG59XSlcbiIsImFuZ3VsYXIubW9kdWxlKCd3ZWF0aGVyQXBwLmZpbHRlcnMnLCBbXSlcblxuICAuZmlsdGVyKCdpbnRlcnBvbGF0ZScsIFsndmVyc2lvbicsIGZ1bmN0aW9uKHZlcnNpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGV4dCkge1xuICAgICAgcmV0dXJuIFN0cmluZyh0ZXh0KS5yZXBsYWNlKC9cXCVWRVJTSU9OXFwlL21nLCB2ZXJzaW9uKTtcbiAgICB9XG4gIH1dKVxuXG4gIC5maWx0ZXIoJ3BsYWNlaG9sZGVyJywgW2Z1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQscGh2YWx1ZSkge1xuICAgICAgcmV0dXJuIChhbmd1bGFyLmlzVW5kZWZpbmVkKGlucHV0KSB8fCBpbnB1dCA9PSAnJykgPyBwaHZhbHVlIDogaW5wdXQ7XG4gICAgfTtcbiAgfV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnd2VhdGhlckFwcC5kaXJlY3RpdmVzJywgW10pXG4gIC5kaXJlY3RpdmUoJ2ZvcmVjYXN0SXRlbScsW2Z1bmN0aW9uIGZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHVzZURheUZvcmVjYXN0OiAnPXNob3dFbnRyeScsXG4gICAgICAgIGZvcmVjYXN0OiAnPWZvcmVjYXN0SXRlbSdcbiAgICAgIH0sXG5cbiAgICAgIHRlbXBsYXRlVXJsOiAnX2ZvcmVjYXN0LWl0ZW0uaHRtbCcsXG5cbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgIHNjb3BlLmdldEljb25JbWFnZVVybCA9IGZ1bmN0aW9uKGljb25OYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIChpY29uTmFtZSA/ICdodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93LycgKyBpY29uTmFtZSArICcucG5nJyA6ICcnKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzY29wZS5wYXJzZURhdGUgPSBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lICogMTAwMCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XSlcbiJdfQ==
